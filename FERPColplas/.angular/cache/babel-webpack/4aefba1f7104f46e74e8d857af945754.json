{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/corrida.service\";\nimport * as i2 from \"src/app/services/material.service\";\nimport * as i3 from \"src/app/services/orden-produccion.service\";\nimport * as i4 from \"@angular/common\";\n\nfunction MaterialSalidaMostrarComponent_table_2_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelementStart(6, \"i\", 5);\n    i0.ɵɵlistener(\"click\", function MaterialSalidaMostrarComponent_table_2_tr_9_Template_i_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const material_r3 = restoredCtx.$implicit;\n      const materialSalida_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.editarMaterialSalida(material_r3, ctx_r4.ListaMaterialesColumnas, materialSalida_r1.key, materialSalida_r1.value.indexOf(material_r3));\n    });\n    i0.ɵɵelement(7, \"i\", 6);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(8, \"svg\", 7);\n    i0.ɵɵelement(9, \"path\", 8);\n    i0.ɵɵelement(10, \"path\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(11, \"i\", 10);\n    i0.ɵɵlistener(\"click\", function MaterialSalidaMostrarComponent_table_2_tr_9_Template_i_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const material_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.verMaterialSalida(material_r3);\n    });\n    i0.ɵɵelement(12, \"i\", 11);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(13, \"svg\", 12);\n    i0.ɵɵelement(14, \"path\", 13);\n    i0.ɵɵelement(15, \"path\", 14);\n    i0.ɵɵelement(16, \"path\", 15);\n    i0.ɵɵelement(17, \"path\", 16);\n    i0.ɵɵelement(18, \"path\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const material_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(material_r3.noLote);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(material_r3.pesoNetoRollo);\n  }\n}\n\nfunction MaterialSalidaMostrarComponent_table_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 2);\n    i0.ɵɵelementStart(1, \"thead\");\n    i0.ɵɵelementStart(2, \"tr\", 3);\n    i0.ɵɵelementStart(3, \"th\");\n    i0.ɵɵtext(4, \"N\\u00B0 Lote\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Peso Neto Rollo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Acciones\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, MaterialSalidaMostrarComponent_table_2_tr_9_Template, 19, 2, \"tr\", 4);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const materialSalida_r1 = ctx.$implicit;\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", materialSalida_r1.value);\n  }\n}\n\nexport let MaterialSalidaMostrarComponent = /*#__PURE__*/(() => {\n  class MaterialSalidaMostrarComponent {\n    constructor(_corridaService, _materialService, _ordenProduccionService) {\n      this._corridaService = _corridaService;\n      this._materialService = _materialService;\n      this._ordenProduccionService = _ordenProduccionService;\n      this.cambioEditarMaterialSalida = new EventEmitter();\n      this.cambioVerMaterialSalida = new EventEmitter(); // this._ordenProduccionService.CorridasOrdenProduccion\n\n      this.CorridasExtrusion = [];\n      this.MaterialSalida = [];\n      this.ListaMaterialesColumnas = [];\n    }\n\n    ngOnChanges(changes) {\n      this.CorridasExtrusion = [];\n\n      try {\n        this.CorridasExtrusion.push(this._corridaService.DatosCorridaNoFinalizada);\n        this.CorridasExtrusion.push(this._corridaService.CorridaExtrusion);\n      } catch (error) {}\n\n      try {\n        if (this.CorridasExtrusion) {\n          this.obterMaterialSalida();\n          var materialSalidaCorrrida = [];\n          materialSalidaCorrrida.push(this.ListaMaterialesColumnas);\n\n          if (this._corridaService.numeroCorridaPagination == 0) {\n            this._corridaService.AlmacenarInformacionCorrida[1][1] = materialSalidaCorrrida;\n          } else {\n            this._corridaService.AlmacenarInformacionCorrida[this._corridaService.numeroCorridaPagination][1] = materialSalidaCorrrida;\n          }\n        }\n      } catch (error) {}\n    } // It obteins all the elements in materiales de salida\n\n\n    obterMaterialSalida() {\n      var pk;\n\n      if (this.CorridasExtrusion[0].length > 0) {\n        pk = this.CorridasExtrusion[0][2][0][0].pk_CorridaExtrusion;\n      }\n\n      if (this.CorridasExtrusion[1].pk_CorridaExtrusion != undefined) {\n        pk = this.CorridasExtrusion[1].pk_CorridaExtrusion;\n      }\n\n      try {\n        if (pk != undefined) {\n          this._materialService.countMaterialSalidaExtrusion(pk).subscribe(data => {\n            this.MaterialSalida = data[0];\n            this.organizarDataMostrar(this.MaterialSalida);\n            this._materialService.MaterialSalidaPermisoEditar = true;\n          }, error => {\n            console.log(error);\n          });\n        }\n      } catch (error) {}\n    } // this function sorts the elements that will go to show \n\n\n    organizarDataMostrar(MaterialSalida) {\n      var primeraList = [];\n      var segundaList = [];\n      var terceraList = [];\n      var cuartaList = [];\n      var i = this.MaterialSalida.length;\n      var n = i;\n      this.ListaMaterialesColumnas = [];\n\n      for (let index = 1; index <= i; index++) {\n        // it's with 4 'cause i will only show 4 columns\n        var valor = index % 4;\n\n        if (valor == 1) {\n          primeraList.push(this.MaterialSalida.slice(index - 1)[0]);\n\n          if (this.ListaMaterialesColumnas[0]) {\n            if (JSON.stringify(this.ListaMaterialesColumnas).includes(JSON.stringify(primeraList).slice(1, -1))) {} else {\n              this.ListaMaterialesColumnas[0].push(primeraList[0]);\n            }\n          } else {\n            this.ListaMaterialesColumnas[0] = primeraList;\n          }\n        }\n\n        if (valor == 2) {\n          segundaList.push(this.MaterialSalida.slice(index - 1)[0]);\n\n          if (this.ListaMaterialesColumnas[1]) {\n            if (JSON.stringify(this.ListaMaterialesColumnas).includes(JSON.stringify(segundaList).slice(1, -1))) {} else {\n              this.ListaMaterialesColumnas[1].push(segundaList[0]);\n            }\n          } else {\n            this.ListaMaterialesColumnas[1] = segundaList;\n          }\n        }\n\n        if (valor == 3) {\n          terceraList.push(this.MaterialSalida.slice(index - 1)[0]);\n\n          if (this.ListaMaterialesColumnas[2]) {\n            if (JSON.stringify(this.ListaMaterialesColumnas).includes(JSON.stringify(terceraList).slice(1, -1))) {} else {\n              this.ListaMaterialesColumnas[2].push(terceraList[0]);\n            }\n          } else {\n            this.ListaMaterialesColumnas[2] = terceraList;\n          }\n        }\n\n        if (valor == 0) {\n          cuartaList.push(this.MaterialSalida.slice(index - 1)[0]);\n\n          if (this.ListaMaterialesColumnas[3]) {\n            if (JSON.stringify(this.ListaMaterialesColumnas).includes(JSON.stringify(cuartaList).slice(1, -1))) {} else {\n              this.ListaMaterialesColumnas[3].push(cuartaList[0]);\n            }\n          } else {\n            this.ListaMaterialesColumnas[3] = cuartaList;\n          }\n        }\n\n        n = n - 1;\n      }\n    } // It activates the component of material salida editar for edit\n\n\n    editarMaterialSalida(MaterialSalida, ListaMaterialesColumnas, MaterialSalidaNumero, MaterialSalidaNumero2) {\n      if (this._corridaService.AceptarMaterialSalida == true) {\n        this._materialService.MaterialSalida = MaterialSalida;\n        this._materialService.MaterialSalidaP = MaterialSalidaNumero;\n        this._materialService.MaterialSalidaS = MaterialSalidaNumero2;\n        this._materialService.MaterialesSalida = ListaMaterialesColumnas;\n        var cortina = document.getElementsByClassName(\"cortina\");\n        cortina[0].style.visibility = 'visible';\n        this.cambioEditarMaterialSalida.emit(true);\n      }\n    } // It activates the component of material salida ver for show the data\n\n\n    verMaterialSalida(MaterialSalida) {\n      this._materialService.MaterialSalidaVer[2] = MaterialSalida;\n      this._materialService.MaterialSalidaPermisoVer;\n      this._materialService.MaterialSalidaPermisoVer = true;\n      this.cambioVerMaterialSalida.emit(true);\n      var cortina = document.getElementsByClassName(\"cortina\");\n      cortina[0].style.visibility = 'visible';\n    }\n\n  }\n\n  MaterialSalidaMostrarComponent.ɵfac = function MaterialSalidaMostrarComponent_Factory(t) {\n    return new (t || MaterialSalidaMostrarComponent)(i0.ɵɵdirectiveInject(i1.CorridaService), i0.ɵɵdirectiveInject(i2.MaterialService), i0.ɵɵdirectiveInject(i3.OrdenProduccionService));\n  };\n\n  MaterialSalidaMostrarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MaterialSalidaMostrarComponent,\n    selectors: [[\"app-material-salida-mostrar\"]],\n    inputs: {\n      materialSalidaActualizar: \"materialSalidaActualizar\"\n    },\n    outputs: {\n      cambioEditarMaterialSalida: \"cambioEditarMaterialSalida\",\n      cambioVerMaterialSalida: \"cambioVerMaterialSalida\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 4,\n    vars: 3,\n    consts: [[1, \"material-salida-table-contenedor\"], [\"class\", \"table table-bordered material-salida-table\", 4, \"ngFor\", \"ngForOf\"], [1, \"table\", \"table-bordered\", \"material-salida-table\"], [1, \"material-salida-table-tr\"], [4, \"ngFor\", \"ngForOf\"], [1, \"i-material-saldia\", \"editar\", 3, \"click\"], [1, \"bi\", \"bi-pencil-square\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-pencil-square\"], [\"d\", \"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"], [\"fill-rule\", \"evenodd\", \"d\", \"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"], [1, \"i-material-saldia\", \"ver\", 3, \"click\"], [1, \"bi\", \"bi-qr-code-scan\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-qr-code-scan\"], [\"d\", \"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0v-3Zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5ZM.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5Zm15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5ZM4 4h1v1H4V4Z\"], [\"d\", \"M7 2H2v5h5V2ZM3 3h3v3H3V3Zm2 8H4v1h1v-1Z\"], [\"d\", \"M7 9H2v5h5V9Zm-4 1h3v3H3v-3Zm8-6h1v1h-1V4Z\"], [\"d\", \"M9 2h5v5H9V2Zm1 1v3h3V3h-3ZM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8H8Zm2 2H9V9h1v1Zm4 2h-1v1h-2v1h3v-2Zm-4 2v-1H8v1h2Z\"], [\"d\", \"M12 9h2V8h-2v1Z\"]],\n    template: function MaterialSalidaMostrarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵtemplate(2, MaterialSalidaMostrarComponent_table_2_Template, 10, 1, \"table\", 1);\n        i0.ɵɵpipe(3, \"keyvalue\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(3, 1, ctx.ListaMaterialesColumnas));\n      }\n    },\n    directives: [i4.NgForOf],\n    pipes: [i4.KeyValuePipe],\n    styles: [\".table-materialSalida[_ngcontent-%COMP%]{float:left;margin-top:30px;margin-inline:-61px;margin-left:111px}.i-material-saldia[_ngcontent-%COMP%]{margin-inline:7px}.ver[_ngcontent-%COMP%]{color:#404040}.editar[_ngcontent-%COMP%]{color:#196fbc}.material-salida-table-contenedor[_ngcontent-%COMP%]{margin:0 20px 20px;display:flex}.material-salida-table[_ngcontent-%COMP%]{width:28%;margin-inline:15px}.material-salida-table-tr[_ngcontent-%COMP%]{background:#e8e8e8}\"]\n  });\n  return MaterialSalidaMostrarComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
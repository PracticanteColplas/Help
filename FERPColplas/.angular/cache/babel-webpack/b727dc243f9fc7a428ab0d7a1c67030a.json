{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/operario.service\";\nimport * as i2 from \"src/app/services/reproceso.service\";\nimport * as i3 from \"src/app/services/material.service\";\nimport * as i4 from \"src/app/services/corrida.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction InformacionGeneralInicioComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 8);\n    i0.ɵɵelementStart(1, \"td\", 9);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 9);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 9);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"td\", 9);\n    i0.ɵɵelementStart(8, \"td\", 9);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 9);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\", 9);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"td\", 9);\n    i0.ɵɵelementStart(15, \"td\", 9);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"td\", 9);\n    i0.ɵɵelementStart(18, \"td\", 10);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.inicioCorrida[0]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.inicioCorrida[1]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.inicioCorrida[2]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.finalCorrida[0]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.finalCorrida[1]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.finalCorrida[2]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.inicioCorrida[3]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.DuracionCorrida);\n  }\n}\n\nexport let InformacionGeneralInicioComponent = /*#__PURE__*/(() => {\n  class InformacionGeneralInicioComponent {\n    constructor(_operarioService, _reprocesoService, _materialService, _corridaService) {\n      this._operarioService = _operarioService;\n      this._reprocesoService = _reprocesoService;\n      this._materialService = _materialService;\n      this._corridaService = _corridaService;\n      this.inicioCorrida = [];\n      this.finalCorrida = [];\n    }\n\n    ngOnChanges() {\n      this.buscarNombreOperario();\n      var informacionGeneralCorrida = [];\n      informacionGeneralCorrida.push(this.inicioCorrida);\n      informacionGeneralCorrida.push(this.finalCorrida);\n      informacionGeneralCorrida.push(this.DuracionCorrida);\n      var array = [];\n      array[0] = informacionGeneralCorrida;\n\n      if (this._corridaService.numeroCorridaPagination == 0) {\n        this._corridaService.AlmacenarInformacionCorrida[1] = array;\n      } else {\n        this._corridaService.AlmacenarInformacionCorrida[this._corridaService.numeroCorridaPagination] = array;\n      }\n    } // This function search the driver's name\n\n\n    buscarNombreOperario() {\n      this.InformacionActualizarInicioFinal = this._corridaService.InformacionActualizarInicioFinal;\n\n      if (this._corridaService.InformacionActualizarInicioFinal) {\n        this.OperarioCorridaExtrusion = this._corridaService.OperarioCorridaExtrusionInicio;\n      } else {\n        this.OperarioCorridaExtrusion = this._corridaService.OperarioCorridaExtrusionFinal;\n      }\n\n      try {\n        this.OperarioCorridaExtrusion.operarioIncial = this._corridaService.DatosCorridaNoFinalizada[3][0][0].pk_Operario;\n        this.OperarioCorridaExtrusion.fechaInicial = this._corridaService.DatosCorridaNoFinalizada[3][0][0].fechaHora;\n      } catch (error) {}\n\n      if (this.OperarioCorridaExtrusion.operarioIncial) {\n        // It gets all the data of the driver of the corrida's start\n        this._operarioService.getOperario(this.OperarioCorridaExtrusion.operarioIncial).subscribe(data => {\n          this._materialService.MaterialSalidaVer.push(data);\n\n          this._reprocesoService.ReprocesoVer.push(data);\n\n          this.inicioCorrida.push(data[0].nombre);\n          this.fechaInicio = this.fechaFin = new Date(this.OperarioCorridaExtrusion.fechaInicial).getTime();\n          var fechaInicial = this.OperarioCorridaExtrusion.fechaInicial.substr(0, 10);\n          var horaInicial = this.OperarioCorridaExtrusion.fechaInicial.substr(10 + 1);\n\n          if (this._corridaService.CorridaNoFinalizadaActivar) {\n            var tiempoAjuste = this._corridaService.DatosCorridaNoFinalizada[2][0][0].tiempoAjuste;\n          } else {\n            var tiempoAjuste = this.OperarioCorridaExtrusion.tiempoAjuste;\n          }\n\n          this.inicioCorrida.push(fechaInicial);\n          this.inicioCorrida.push(horaInicial);\n          this.inicioCorrida.push(tiempoAjuste);\n        }, error => {\n          console.log(error);\n        });\n      }\n\n      if (this.OperarioCorridaExtrusion.operarioFinal) {\n        // It gets all the data of the driver of the corrida's end\n        this._operarioService.getOperario(this.OperarioCorridaExtrusion.operarioFinal).subscribe(data => {\n          this.finalCorrida.push(data[0].nombre); // That's for count the hours of the corrida's execution\n\n          this.fechaFin = new Date(this.OperarioCorridaExtrusion.fechaFinal).getTime();\n          var fechaFinal = this.OperarioCorridaExtrusion.fechaFinal.substr(0, 10);\n          var horaFinal = this.OperarioCorridaExtrusion.fechaFinal.substr(10 + 1);\n          var resta = this.fechaFin - this.fechaInicio;\n          var horas = resta / (1000 * 60 * 60);\n          this.DuracionCorrida = horas;\n          this._corridaService.ActualizarDuracionCorrida = true;\n          this._corridaService.DuracionCorrida = this.DuracionCorrida;\n          this.finalCorrida.push(fechaFinal);\n          this.finalCorrida.push(horaFinal);\n        }, error => {\n          console.log(error);\n        });\n      }\n    }\n\n  }\n\n  InformacionGeneralInicioComponent.ɵfac = function InformacionGeneralInicioComponent_Factory(t) {\n    return new (t || InformacionGeneralInicioComponent)(i0.ɵɵdirectiveInject(i1.OperarioService), i0.ɵɵdirectiveInject(i2.ReprocesoService), i0.ɵɵdirectiveInject(i3.MaterialService), i0.ɵɵdirectiveInject(i4.CorridaService));\n  };\n\n  InformacionGeneralInicioComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: InformacionGeneralInicioComponent,\n    selectors: [[\"app-informacion-general-inicio\"]],\n    inputs: {\n      ActualizarInformacion: \"ActualizarInformacion\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 29,\n    vars: 1,\n    consts: [[1, \"app-informacion-general\"], [1, \"div-contenedor-InformacionGeneral\"], [1, \"title-InformacionGeneral\"], [1, \"table\", \"table-bordered\"], [1, \"informacion-general-table\"], [1, \"informacion-general-table-th\"], [1, \"informacion-general-table-td\"], [\"class\", \"informacion-table-tbody-tr\", 4, \"ngIf\"], [1, \"informacion-table-tbody-tr\"], [1, \"informacion-table-tbody-td\"], [1, \"informacion-table-tbody-td\", \"color-amarillo\"]],\n    template: function InformacionGeneralInicioComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"h3\", 2);\n        i0.ɵɵtext(3, \"INFORMACION GENERAL DE LA CORRIDA\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\");\n        i0.ɵɵelementStart(5, \"div\");\n        i0.ɵɵelementStart(6, \"table\", 3);\n        i0.ɵɵelementStart(7, \"thead\");\n        i0.ɵɵelementStart(8, \"tr\", 4);\n        i0.ɵɵelementStart(9, \"th\", 5);\n        i0.ɵɵtext(10, \"Operario de Inicio\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"th\", 5);\n        i0.ɵɵtext(12, \"Fecha de Inicio\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"th\", 5);\n        i0.ɵɵtext(14, \"Hora de Inicio\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"td\", 6);\n        i0.ɵɵelementStart(16, \"th\", 5);\n        i0.ɵɵtext(17, \"Operario Final\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\", 5);\n        i0.ɵɵtext(19, \"Fecha Final\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"th\", 5);\n        i0.ɵɵtext(21, \"Hora Final\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"td\", 6);\n        i0.ɵɵelementStart(23, \"th\", 5);\n        i0.ɵɵtext(24, \"Tiempo Ajuste (H)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"td\", 6);\n        i0.ɵɵelementStart(26, \"th\", 5);\n        i0.ɵɵtext(27, \"Duracion Corrida (H)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(28, InformacionGeneralInicioComponent_tr_28_Template, 20, 8, \"tr\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(28);\n        i0.ɵɵproperty(\"ngIf\", ctx.inicioCorrida.length != 0);\n      }\n    },\n    directives: [i5.NgIf],\n    styles: [\".app-informacion-general[_ngcontent-%COMP%]{width:80%;float:left;margin-right:10%;margin-left:10%;margin-bottom:0}.table[_ngcontent-%COMP%]{text-align:center}.title-InformacionGeneral[_ngcontent-%COMP%]{margin-top:20px;border:#bcb0b0 solid 2px;margin-bottom:0;background:#d2d2d2;font-weight:bold}.informacion-general-table[_ngcontent-%COMP%]{background:#e8e8e8;border-top:0px;border-bottom:white}.informacion-general-table-td[_ngcontent-%COMP%]{background:white;border-bottom:white}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:0px}.informacion-table-tbody-td[_ngcontent-%COMP%]{border:white}.color-amarillo[_ngcontent-%COMP%]{background:#ffd600}\"]\n  });\n  return InformacionGeneralInicioComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
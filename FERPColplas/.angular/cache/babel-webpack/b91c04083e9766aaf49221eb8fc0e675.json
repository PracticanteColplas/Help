{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-toastr\";\nimport * as i2 from \"src/app/services/retal.service\";\nimport * as i3 from \"src/app/services/devolucion.service\";\nimport * as i4 from \"src/app/services/material.service\";\nimport * as i5 from \"src/app/services/consumo-mpri-extrusion.service\";\nexport let MateriaPrimaEliminarComponent = /*#__PURE__*/(() => {\n  class MateriaPrimaEliminarComponent {\n    constructor(toastr, _retalService, _devolucionService, _materialService, _consumoMPriExtrusionService) {\n      this.toastr = toastr;\n      this._retalService = _retalService;\n      this._devolucionService = _devolucionService;\n      this._materialService = _materialService;\n      this._consumoMPriExtrusionService = _consumoMPriExtrusionService;\n      this.cambio = new EventEmitter();\n    }\n\n    ngOnChanges() {\n      if (this.MPriExtrusionEliminar.pk_ConsumoMPriExtrusion != 0 && this.MPriExtrusionEliminar.pk_ConsumoMPriExtrusion != undefined) {\n        this.eliminarRetalExtrusionCantidad();\n      }\n    }\n\n    eliminarRetalExtrusionCantidad() {\n      var valor = this.MPriExtrusionEliminar.cantidadConsumida;\n\n      this._consumoMPriExtrusionService.deleteMPriExtrusionCantidad(this.MPriExtrusionEliminar.pk_ConsumoMPriExtrusion).subscribe(data => {\n        // Update the data in view\n        this._consumoMPriExtrusionService.MPriExtrusionCantidadTotal[this.MPriExtrusionEliminar.fk_MPri] = this._consumoMPriExtrusionService.MPriExtrusionCantidadTotal[this.MPriExtrusionEliminar.fk_MPri] - this.MPriExtrusionEliminar.cantidadConsumida; // console.log(this._consumoMPriExtrusionService.ConsumoMPriActualizar)\n        // if (this._consumoMPriExtrusionService.ConsumoMPriActualizar) {\n        //   this._consumoMPriExtrusionService.ConsumoMPriActualizar = false;\n        // }else{\n        //   this._consumoMPriExtrusionService.ConsumoMPriActualizar = true;\n        // }\n        // console.log(this._consumoMPriExtrusionService.ConsumoMPriActualizar)\n\n        this.toastr.error('La materia prima fue eliminada con exito', 'Materia prima eliminada');\n        this._consumoMPriExtrusionService.MPriExtrusionTotalIngresada[this._consumoMPriExtrusionService.MPriExtrusionCambioB];\n\n        if (this._consumoMPriExtrusionService.MPriExtrusionTotalIngresada[this._consumoMPriExtrusionService.MPriExtrusionCambioB].length == 0) {\n          this._consumoMPriExtrusionService.MPriExtrusionTotalIngresada.splice(this._consumoMPriExtrusionService.MPriExtrusionCambioB, 1);\n        }\n\n        if (this._devolucionService.DevolucionActualizar) {\n          this._devolucionService.DevolucionActualizar = false;\n        } else {\n          this._devolucionService.DevolucionActualizar = true;\n        }\n\n        if (this._materialService.MaterialSalidaActualizar) {\n          this._materialService.MaterialSalidaActualizar = false;\n        } else {\n          this._materialService.MaterialSalidaActualizar = true;\n        }\n\n        if (this._retalService.RetalExtrusionActualizar) {\n          this._retalService.RetalExtrusionActualizar = false;\n        } else {\n          this._retalService.RetalExtrusionActualizar = true;\n        }\n\n        this._consumoMPriExtrusionService.MPriExtrusionTotal = this._consumoMPriExtrusionService.MPriExtrusionTotal - valor;\n      }, error => {\n        console.log(error);\n      });\n\n      if (this._consumoMPriExtrusionService.ConsumoMPriActualizar) {\n        this._consumoMPriExtrusionService.ConsumoMPriActualizar = false;\n      } else {\n        this._consumoMPriExtrusionService.ConsumoMPriActualizar = true;\n      }\n    }\n\n  }\n\n  MateriaPrimaEliminarComponent.ɵfac = function MateriaPrimaEliminarComponent_Factory(t) {\n    return new (t || MateriaPrimaEliminarComponent)(i0.ɵɵdirectiveInject(i1.ToastrService), i0.ɵɵdirectiveInject(i2.RetalService), i0.ɵɵdirectiveInject(i3.DevolucionService), i0.ɵɵdirectiveInject(i4.MaterialService), i0.ɵɵdirectiveInject(i5.ConsumoMPriExtrusionService));\n  };\n\n  MateriaPrimaEliminarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MateriaPrimaEliminarComponent,\n    selectors: [[\"app-materia-prima-eliminar\"]],\n    inputs: {\n      MPriExtrusionEliminar: \"MPriExtrusionEliminar\"\n    },\n    outputs: {\n      cambio: \"cambio\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 0,\n    vars: 0,\n    template: function MateriaPrimaEliminarComponent_Template(rf, ctx) {},\n    styles: [\"\"]\n  });\n  return MateriaPrimaEliminarComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}